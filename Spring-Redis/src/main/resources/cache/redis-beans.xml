<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
       xmlns:c="http://www.springframework.org/schema/c"
       xmlns:p="http://www.springframework.org/schema/p">

	<bean id="jedisPool" class="redis.clients.jedis.JedisPool">
		<constructor-arg index="0" ref="jedisPoolConfig" />
		<constructor-arg index="1" value="${redis.host}"/>
		<constructor-arg index="2" value="${redis.port}"/>
		<constructor-arg index="3" value="2000"/>
		<constructor-arg index="4" value="${redis.password}"/>
		<constructor-arg name="database" value="4"/>
	</bean>

	<bean id="jedisPoolConfig" class="redis.clients.jedis.JedisPoolConfig">
		<!-- 最大连接数, 默认8个 -->
		<property name="maxTotal" value="${redis.config.maxTotal}" />
		<!--  最小空闲连接数, 默认0 -->
		<property name="minIdle" value="${redis.config.minIdle}" />
		<!--最大空闲连接数, 默认8个-->
		<property name="maxIdle" value="${redis.config.maxIdle}" />
		<!-- 获取连接时的最大等待毫秒数(如果设置为阻塞时BlockWhenExhausted),如果超时就抛异常, 小于零:阻塞不确定的时间,  默认-1 -->
		<property name="maxWaitMillis" value="-1" />
		<!-- 在获取连接的时候检查有效性, 默认false -->
		<property name="testOnBorrow" value="false" />
		<!-- 在return给pool时，是否提前进行validate操作； -->
		<property name="testOnReturn" value="true" />
		<!-- 在空闲时检查有效性, 默认false -->
		<property name="testWhileIdle" value="true" />
	</bean>


	<bean id="stringCache" class="com.van.dusty.redis.StringCache">
		<property name="jedisPool" ref="jedisPool"/>
	</bean>
	<bean id="listCache" class="com.van.dusty.redis.ListCache">
		<property name="jedisPool" ref="jedisPool"/>
	</bean>
	<bean id="hashCache" class="com.van.dusty.redis.HashCache">
		<property name="jedisPool" ref="jedisPool"/>
	</bean>
	<bean id="setCache" class="com.van.dusty.redis.SetCache">
		<property name="jedisPool" ref="jedisPool"/>
	</bean>
	<bean id="redisClient" class="com.van.dusty.redis.RedisClient">
		<property name="jedisPool" ref="jedisPool"/>
	</bean>
	<bean id="redisLock" class="com.van.dusty.redis.RedisDistributedLock">
		<property name="jedisPool" ref="jedisPool"/>
	</bean>


</beans>
